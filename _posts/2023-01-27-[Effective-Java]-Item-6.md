---
title: "[Effective Java] Item 6"
date: 2023-01-27 09:00:00 +0900
categories: [Study, Effective Java]
tags: [Java, Effective Java]
---

# Effective Java - Item 6

<aside>
ğŸ’¡ ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼

</aside>

ë˜‘ê°™ì€ ê¸°ëŠ¥ì˜ ê°ì²´ë¥¼ ì—¬ëŸ¬ ë²ˆ ìƒì„±í•˜ëŠ” ê²ƒë³´ë‹¤ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ í–¥ìƒì— ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤. íŠ¹íˆ ë¶ˆë³€ ê°ì²´ëŠ” ì–¸ì œë“  ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java
String s1 = new String(â€homework!â€); // í•˜ì§€ ë§ì•„ì•¼ í•  ì½”ë“œ

String s2 = "homework!";
```

í•´ë‹¹ ì½”ë“œì˜ s1, s2ëŠ” ê²°ê³¼ì ìœ¼ë¡œ ê°™ì€ ê¸°ëŠ¥ì„ í•œë‹¤.

s1ì˜ ê²½ìš° â€œhomework!â€ ìì²´ê°€ í•´ë‹¹ ìƒì„±ìë¡œ ë§Œë“¤ì–´ ë‚´ë ¤ëŠ” String ì¸ìŠ¤í„´ìŠ¤ì™€ ì™„ì „íˆ ê°™ì§€ë§Œ, `new String()` ìœ¼ë¡œ ê°ì‹¸ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ String ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒˆë¡œ ìƒì„±ëœë‹¤.

í•´ë‹¹ ì½”ë“œê°€ ë¹ˆë²ˆíˆ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ì•ˆì— ì¡´ì¬í•œë‹¤ë©´ ì“¸ë°ì—†ëŠ” String ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆ˜ë°±ë§Œ ê°œì”© ë§Œë“¤ì–´ì§ˆ ìˆ˜ë„ ìˆë‹¤.

ë°˜ë©´ s2ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ì„ ì¬ì‚¬ìš©í•˜ë¯€ë¡œ ê°™ì€ JVMì— ë™ì¼í•œ ë¬¸ìì—´ ë¦¬í„°ëŸ´ì´ ì¡´ìí•œë‹¤ë©´ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë„ ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•  ìˆ˜ ìˆë‹¤.

â†’ í•­ìƒ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” `Boolean(String)` ìƒì„±ì ëŒ€ì‹   ê¸°ì¡´ì— ìºì‹±í•œ ê°ì²´ë¥¼ ë°˜í™˜í•´ì£¼ëŠ”`Boolean.valueOf(String)` íŒ©í„°ë¦¬ ë©”ì†Œë“œë¥¼ ì‚¬ìš©

ë˜í•œ ë°ì´í„° ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ê³¼ ê°™ì´ ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¼ ê°ì²´ê°€ ë°˜ë³µí•´ì„œ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ìºì‹±ì„ í†µí•´ ì¬ì‚¬ìš© í•´ì•¼ í•œë‹¤. ë‹¤ë§Œ ìì‹ ì´ ìƒì„±í•´ì•¼ í•˜ëŠ” ê°ì²´ê°€ ë¹„ì‹¼ ê°ì²´ì¸ì§€ë¥¼ ë§¤ë²ˆ ëª…í™•í•˜ê²Œ ì•Œ 

ìˆ˜ëŠ” ì—†ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì´ `String.matches()` ë©”ì†Œë“œëŠ” ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¬¸ìì—´ í˜•íƒœë¥¼ í™•ì¸í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì´ì§€ë§Œ, ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ìƒí™©ì—ì„œ ë°˜ë³µí•´ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ì í•©í•˜ì§€ ì•Šë‹¤.  

```java
static boolean isRomanNumeral(String s) {
	return s.matches("^(?=.)M*(C[MD]|D?C{0,3})"
				+ "(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$");
}
```

â†’ `matches()` ë©”ì†Œë“œ ë‚´ë¶€ì—ì„œ ì •ì˜í•˜ëŠ” Pattern ì¸ìŠ¤í„´ìŠ¤ëŠ” ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±ë˜ì–´ í•œ ë²ˆ ì“°ê³  ë²„ë ¤ì ¸ ê³§ë°”ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ëœë‹¤.

String í´ë˜ìŠ¤ì˜ `matches()` ë©”ì†Œë“œê°€ ë°˜í™˜í•˜ëŠ” Patternì€ ë¶ˆë³€ í´ë˜ìŠ¤(final class) ì´ê³ , ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¸ê¸° ë•Œë¬¸ì— ì¬ì‚¬ìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤. Pattern ì€ ì…ë ¥ë°›ì€ ì •ê·œ í‘œí˜„ì‹ì— í•´ë‹¹í•˜ëŠ” ìœ í•œ ìƒíƒœ ë¨¸ì‹ (finite state machine)ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¹„ìš©ì´ ë†’ë‹¤.

```java
public class RomanNumerals {
	private static final Pattern ROMAN = Pattern.compile(
				"^(?=.)M*(C[MD]|D?C{0,3})"
				+ "(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$");

	static boolean isRomanNumeral(String s) {
		return ROMAN.matcher(s).matches();
	}
}
```

â†’ Pattern ì¸ìŠ¤í„´ìŠ¤ë¥¼ `static final` í•„ë“œë¡œ êº¼ë‚´ê³  ì´ë¦„ì„ ì§€ì •í•˜ì—¬ ì–´ë–¤ ì½”ë“œì¸ì§€ ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ìˆë‹¤.

ì„±ëŠ¥ì„ ê°œì„ í•˜ê¸° ìœ„í•´ì„œëŠ” í•„ìš”í•œ ì •ê·œí‘œí˜„ì‹ì„ í‘œí˜„í•˜ëŠ” Pattern ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë˜ìŠ¤ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ ì§ì ‘ ìƒì„±í•˜ì—¬ ìºì‹±í•˜ê³ , ë‚˜ì¤‘ì— ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•˜ë„ë¡ í•´ì•¼í•œë‹¤.

ë‹¤ë§Œ, ê°œì„ ëœ isRomanNumeral ë°©ì‹ì˜ í´ë˜ìŠ¤ê°€ ì´ˆê¸°í™”ëœ í›„ ë©”ì„œë“œë¥¼ í•œ ë²ˆë„ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ROMAN í•„ë“œëŠ” ì“¸ë°ì—†ì´ ì´ˆê¸°í™”ëœ ê¼´ì´ë‹¤. ë©”ì„œë“œê°€ ì²˜ìŒ í˜¸ì¶œë  ë•Œ í•„ë“œë¥¼ ì´ˆê¸°í™”í•˜ëŠ” **ì§€ì—° ì´ˆê¸°í™”(lazy initialzation)**ë¡œ ë¶ˆí•„ìš”í•œ ì´ˆê¸°í™”ë¥¼ ë§‰ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ, ì½”ë“œê°€ ë³µì¡í•´ì§€ëŠ” ê²ƒì— ë¹„í•´ ì„±ëŠ¥ì€ í¬ê²Œ ê°œì„ ë˜ì§€ ì•Šì„ ë•Œê°€ ë§ë‹¤.

ë˜ ë‹¤ë¥¸ ë¶ˆí•„ìš”í•œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ì˜ˆì‹œë¡œ ì˜¤í† ë°•ì‹±(auto boxing)ì„ ë“¤ ìˆ˜ ìˆë‹¤.

â“ì˜¤í† ë°•ì‹±(auto boxing)

> ìë°” ì»´íŒŒì¼ëŸ¬ê°€ primitive data typeì„ ê·¸ì— ìƒì‘í•˜ëŠ” wrapper classë¡œ ìë™ ë³€í™˜ ì‹œì¼œì£¼ëŠ” ê²ƒ, ì˜ˆë¥¼ ë“¤ë©´ intë¥¼ Integerë¡œ, doubleì„ Doubleë¡œ ë³€í™˜í•œë‹¤.
> 

```java
private static long sum() {
	Long sum = 0L;
	for (long i = 0; i <= Integer.MAX_VALUE; i++) 
		sum += i;

	return sum;
}
```

â†’ ëª¨ë“  ì–‘ì˜ ì •ìˆ˜ì˜ ì´í•©ì„ êµ¬í•˜ëŠ” ë©”ì†Œë“œ

ìœ„ ì½”ë“œì—ì„œ sumì„ Longìœ¼ë¡œ ì„ ì–¸í•¨ì— ë”°ë¼ ë¶ˆí•„ìš”í•œ Long ì¸ìŠ¤í„´ìŠ¤ê°€ ê³„ì†í•´ì„œ ìƒì„±ëœë‹¤. 

ë‹¨ìˆœíˆ sumì˜ íƒ€ì…ì„ longìœ¼ë¡œë§Œ ë°”ê¿”ì¤˜ë„ ì˜¤í† ë°•ì‹±ì´ ì¼ì–´ë‚˜ì§€ ì•Šê³ , ë¶ˆí•„ìš”í•œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì´ ì¤„ì–´ ì„±ëŠ¥ì´ ì¢‹ì•„ì§„ë‹¤.

ì˜ë¯¸ìƒìœ¼ë¡œëŠ” ë³„ë‹¤ë¥¼ ê²ƒì´ ì—†ì§€ë§Œ ì„±ëŠ¥ì— ìˆì–´ì„œëŠ” ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ë³´ë‹¤ëŠ” ê¸°ë³¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³  ì˜ë„ì¹˜ ì•Šì€ ì˜¤í† ë°•ì‹±ì´ ìˆ¨ì–´ë“¤ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼í•œë‹¤.