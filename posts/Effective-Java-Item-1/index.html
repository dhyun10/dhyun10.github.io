<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Effective Java] Item 1" /><meta property="og:locale" content="en" /><meta name="description" content="Effective Java - Item 1" /><meta property="og:description" content="Effective Java - Item 1" /><link rel="canonical" href="https://dhyun10.github.io//posts/Effective-Java-Item-1/" /><meta property="og:url" content="https://dhyun10.github.io//posts/Effective-Java-Item-1/" /><meta property="og:site_name" content="Dahyun’s DEVLOG" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-12-29T10:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Effective Java] Item 1" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-30T10:19:01+09:00","datePublished":"2022-12-29T10:00:00+09:00","description":"Effective Java - Item 1","headline":"[Effective Java] Item 1","mainEntityOfPage":{"@type":"WebPage","@id":"https://dhyun10.github.io//posts/Effective-Java-Item-1/"},"url":"https://dhyun10.github.io//posts/Effective-Java-Item-1/"}</script><title>[Effective Java] Item 1 | Dahyun's DEVLOG</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Dahyun's DEVLOG"><meta name="application-name" content="Dahyun's DEVLOG"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://raw.githubusercontent.com/cotes2020/chirpy-images/main/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dahyun's DEVLOG</a></div><div class="site-subtitle font-italic">Back-end developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/dhyun10" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['d-hyun10','hanmail.net'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Effective Java] Item 1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Effective Java] Item 1</h1><div class="post-meta text-muted"><div> By <em> Kim dahyun </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1672275600" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-12-29 </em> </span> <span> Updated <em class="timeago" data-ts="1672363141" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-12-30 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2516 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><h1 id="effective-java---item-1">Effective Java - Item 1</h1><aside> 💡 생성자 대신 정적 팩토리 메서드를 고려하라</aside><h2 id="-정적-팩토리-메서드static-factory-method란"><span class="mr-2">❓ 정적 팩토리 메서드(Static Factory Method)란?</span><a href="#-정적-팩토리-메서드static-factory-method란" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>오직 클래스의 인스턴스만을 반환하기 위해 정의된 정적 메소드를 정적 팩토리 메소드라고 한다.</p><ul><li><p>코드</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>  <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">LocalTime</span>
  			<span class="kd">implements</span> <span class="nc">Temporal</span><span class="o">,</span> <span class="nc">TemporalAdjuster</span><span class="o">,</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">LocalTime</span><span class="o">&gt;,</span> <span class="nc">Serializable</span> <span class="o">{</span>
    	
  	<span class="o">...</span>
  		<span class="kd">public</span> <span class="kd">static</span> <span class="nc">LocalTime</span> <span class="nf">of</span><span class="o">(</span><span class="kt">int</span> <span class="n">hour</span><span class="o">,</span> <span class="kt">int</span> <span class="n">minute</span><span class="o">,</span> <span class="kt">int</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
  		        <span class="no">HOUR_OF_DAY</span><span class="o">.</span><span class="na">checkValidValue</span><span class="o">(</span><span class="n">hour</span><span class="o">);</span>
  		        <span class="k">if</span> <span class="o">((</span><span class="n">minute</span> <span class="o">|</span> <span class="n">second</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  		            <span class="k">return</span> <span class="no">HOURS</span><span class="o">[</span><span class="n">hour</span><span class="o">];</span>  <span class="c1">// for performance</span>
  		        <span class="o">}</span>
  		        <span class="no">MINUTE_OF_HOUR</span><span class="o">.</span><span class="na">checkValidValue</span><span class="o">(</span><span class="n">minute</span><span class="o">);</span>
  		        <span class="no">SECOND_OF_MINUTE</span><span class="o">.</span><span class="na">checkValidValue</span><span class="o">(</span><span class="n">second</span><span class="o">);</span>
  		        <span class="k">return</span> <span class="k">new</span> <span class="nf">LocalTime</span><span class="o">(</span><span class="n">hour</span><span class="o">,</span> <span class="n">minute</span><span class="o">,</span> <span class="n">second</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
  		<span class="o">}</span>
    
  	<span class="o">...</span>
  		<span class="kd">private</span> <span class="nf">LocalTime</span><span class="o">(</span><span class="kt">int</span> <span class="n">hour</span><span class="o">,</span> <span class="kt">int</span> <span class="n">minute</span><span class="o">,</span> <span class="kt">int</span> <span class="n">second</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nanoOfSecond</span><span class="o">)</span> <span class="o">{</span>
  		        <span class="k">this</span><span class="o">.</span><span class="na">hour</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">hour</span><span class="o">;</span>
  		        <span class="k">this</span><span class="o">.</span><span class="na">minute</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">minute</span><span class="o">;</span>
  		        <span class="k">this</span><span class="o">.</span><span class="na">second</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">second</span><span class="o">;</span>
  		        <span class="k">this</span><span class="o">.</span><span class="na">nano</span> <span class="o">=</span> <span class="n">nanoOfSecond</span><span class="o">;</span>
  		<span class="o">}</span>
  	<span class="o">...</span>
  <span class="o">}</span>
</pre></table></code></div></div></ul><p>그렇다면 왜 생성자를 호출하지 않고 정적 팩토리 메소드를 사용하는지, 정적 팩토리 메소드의 장/단점을 정리해보자.</p><h3 id="장점"><span class="mr-2">장점</span><a href="#장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><dl><dt><strong>첫 번째, 이름을 가질 수 있다.</strong><dd><p>객체를 생성자로 호출할 때에는 클래스의 매개변수가 많을 수록, 같은 타입의 매개변수가 여러 개 존재할수록, 개발자들은 각 생성자들이 어떤 의미인지 쉽게 파악할 수 없다. 또한, public 생성자는 하나의 시그니처로 하나만 생성할 수 있다. 예를 들어, 학교를 의미하는 클래스에 학생과 선생님이 존재한다. 이때 학생의 이름인 String 변수를 받는 생성자가 존재한다면 선생님의 이름인 String 변수를 받는 생성자는 오류가 발생한다. 이미 하나의 String 변수를 받는 생성자가 존재하기 때문에 다른 생성자가 호출될 수 있기 때문이다. 반면 정적 팩토리 메서드에서는 메서드명을 지정할 수 있기 때문에 한 클래스에 시그니처가 같은 생성자가 여러 개 존재하는 경우에는 생성자를 정적 팩토리 메서드로 바꾸고 메소드명으로 각각의 특성을 나타내어 사용할 수 있다.</p></dl><ul><li><p>코드</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">School</span> <span class="o">{</span>
  	<span class="nc">String</span> <span class="n">studentName</span><span class="o">;</span>
  	<span class="nc">String</span> <span class="n">teacherName</span><span class="o">;</span>
  	<span class="kt">int</span> <span class="n">grade</span><span class="o">;</span>
    
  	<span class="kd">public</span> <span class="nf">School</span><span class="o">(</span><span class="nc">String</span> <span class="n">studentName</span><span class="o">)</span> <span class="o">{</span>
  		<span class="k">this</span><span class="o">.</span><span class="na">studentName</span> <span class="o">=</span> <span class="n">studentName</span><span class="o">;</span>
  	<span class="o">}</span>
    
  <span class="c1">// 에러</span>
  	<span class="kd">public</span> <span class="nf">School</span><span class="o">(</span><span class="nc">String</span> <span class="n">teacherName</span><span class="o">)</span> <span class="o">{</span> 
  		<span class="k">this</span><span class="o">.</span><span class="na">teacherName</span><span class="o">=</span> <span class="n">teacherName</span><span class="o">;</span>
  	<span class="o">}</span>
    
  	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">School</span> <span class="nf">createStudent</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">grade</span><span class="o">)</span> <span class="o">{</span>
  		<span class="k">return</span> <span class="k">new</span> <span class="nf">School</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">grede</span><span class="o">);</span>
  	<span class="o">}</span>
    
  	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">School</span> <span class="nf">createTeacher</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">grade</span><span class="o">)</span> <span class="o">{</span>
  		<span class="k">return</span> <span class="k">new</span> <span class="nf">School</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">grede</span><span class="o">);</span>
  	<span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  		<span class="nc">School</span> <span class="n">student</span> <span class="o">=</span> <span class="n">createStudent</span><span class="o">(</span><span class="s">"학생"</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
  		<span class="nc">School</span> <span class="n">teacher</span> <span class="o">=</span> <span class="n">createTeacher</span><span class="o">(</span><span class="s">"선생님"</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
  	<span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>→ 매개변수의 종류와 개수가 같지만 메소드명으로 인해 반환되는 인스턴스의 명확한 구분이 가능하다.</p></ul><dl><dt><strong>두 번째, 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.</strong><dd><p>주로 사용되는 불변 객체가 존재한다면 미리 생성된 인스턴스를 캐싱하여 재활용함으로써 불필요하게 객체를 생성할 필요가 없다. 대표적으로 <code class="language-plaintext highlighter-rouge">Boolean.valueOf(boolean)</code> 메소드가 있다. <code class="language-plaintext highlighter-rouge">Boolean</code> 클래스에서는 TURE, FALSE를 상수로 정의해 놓고 <code class="language-plaintext highlighter-rouge">valueOf()</code> 메소드가 호출 되었을 때 객체를 새로 생성하지 않고 존재하는 상수를 반환해준다.</p></dl><ul><li><p>코드</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>  <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Boolean</span> <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span>
                                        <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span>
  <span class="o">{</span>
      <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Boolean</span> <span class="no">TRUE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Boolean</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
      <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Boolean</span> <span class="no">FALSE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Boolean</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
  	<span class="o">...</span>
  		<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">valueOf</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="o">(</span><span class="n">b</span> <span class="o">?</span> <span class="no">TRUE</span> <span class="o">:</span> <span class="no">FALSE</span><span class="o">);</span>
      <span class="o">}</span>
  	<span class="o">...</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>→ valueOf(b) 메소드를 호출하면 이미 생성되어 있는 객체를 반환한다.</p></ul><dl><dt><strong>세 번째, 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.</strong><dd><p>하위 클래스들이 하나의 상위 클래스를 상속 받는 구조인 경우에 상위 클래스에서는 어떠한 조건에 따라 하위 클래스 객체들을 반환할 수 있다. 이때, 하위 클래스의 구현체를 공개하지 않고도 반환이 가능하기 때문에 API를 작게 유지할 수 있다. 대표적으로, <code class="language-plaintext highlighter-rouge">java.util.Collections</code> 클래스에서는 수정 불가나 동기화 등의 기능을 포함하여 총 45개의 유틸리티 구현체를 제공하는데 대부분 정적 팩토리 메소드를 통하여 얻을 수 있다.</p></dl><ul><li><p>코드</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Arrays</span> <span class="o">{</span>
  	<span class="o">...</span>
  		<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">asList</span><span class="o">(</span><span class="no">T</span><span class="o">...</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">a</span><span class="o">);</span>
      <span class="o">}</span>
  	<span class="o">...</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>→ java.util.Arrays 클래스에서 asList() 메소드를 통해 List의 하위 클래스인 ArrayList를 반환한다.</p></ul><dl><dt><strong>네 번째, 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.</strong><dd><p>단순히 하위 클래스만을 반환하는 것이 아니라 매개변수에 따라서 각각 다른 하위 클래스의 객체를 반환하는 것이 가능하다. 이때, 클라이언트는 어떤 객체가 반환 되는 지에 대해서는 알 필요가 없다. 예를 들어 <code class="language-plaintext highlighter-rouge">EnumSet</code> 클래스의 <code class="language-plaintext highlighter-rouge">noneOf()</code>메소드는 universe 값에 따라서 다른 하위 클래스를 반환해준다.</p></dl><ul><li><p>코드</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">EnumSet</span><span class="o">&lt;</span><span class="no">E</span> <span class="kd">extends</span> <span class="nc">Enum</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;&gt;</span> <span class="kd">extends</span> <span class="nc">AbstractSet</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span>
      <span class="kd">implements</span> <span class="nc">Cloneable</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span>
  <span class="o">{</span>
  		<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="no">E</span> <span class="kd">extends</span> <span class="nc">Enum</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;&gt;</span> <span class="nc">EnumSet</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="nf">noneOf</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">elementType</span><span class="o">)</span> <span class="o">{</span>
          <span class="nc">Enum</span><span class="o">&lt;?&gt;[]</span> <span class="n">universe</span> <span class="o">=</span> <span class="n">getUniverse</span><span class="o">(</span><span class="n">elementType</span><span class="o">);</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">universe</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
              <span class="k">throw</span> <span class="k">new</span> <span class="nf">ClassCastException</span><span class="o">(</span><span class="n">elementType</span> <span class="o">+</span> <span class="s">" not an enum"</span><span class="o">);</span>
    
          <span class="k">if</span> <span class="o">(</span><span class="n">universe</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;=</span> <span class="mi">64</span><span class="o">)</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">RegularEnumSet</span><span class="o">&lt;&gt;(</span><span class="n">elementType</span><span class="o">,</span> <span class="n">universe</span><span class="o">);</span>
          <span class="k">else</span>
              <span class="k">return</span> <span class="k">new</span> <span class="nc">JumboEnumSet</span><span class="o">&lt;&gt;(</span><span class="n">elementType</span><span class="o">,</span> <span class="n">universe</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>→ EnumSet 클래스의 noneOf() 메소드는 universe의 length 값이 64개 이하일 경우 RegularEnumSet, 아닐 경우에는 JumboEnumSet 객체를 반환해준다.</p></ul><dl><dt><strong>다섯 번째, 정적 팩토리 메서드를 작성하는 시점에는 반환할 객체의 클래스는 존재하지 않아도 된다.</strong><dd><p>지금까지는 이미 구현되어 있는 구현체가 기준이 되었지만, 정적 팩토리 메소드를 활용했을 때에 구현되어있지 않은 객체의 클래스가 존재하지 않아도 된다. 이러한 특징은 <strong>서비스 제공자 프레임워크(Service Provider Framework)</strong> 의 근간이 된다. 서비스를 제공하는 제공자는 서비스의 구현체이고, 이 구현체들을 클라이언트에 제공하는 역할을 프레임워크가 통제하여 클라이언트를 구현체로부터 분리해준다. 서비스 제공자 프레임워크는 3개의 핵심 컴포넌트로 이루어져 있다.</p></dl><ul><li><strong>서비스 인터페이스 (service interface)</strong> : 구현체의 동작을 정의하는 인터페이스<li><strong>제공자 등록 API (provider registration API)</strong> : 제공자가 구현체를 등록하는 API<li><strong>서비스 접근 API (service access API)</strong> : 클라이언트가 서비스의 인스턴스를 얻을 때 사용하는 API</ul><p>이 밖에 종종 네 번째 컴포넌트인 <strong>서비스 제공자 인터페이스 (service provider interface)</strong> 가 쓰인다.</p><p>해당 인터페이스가 없다면 각 구현체를 인스턴스로 만들 때 리플렉션을 사용해야 한다.</p><p>대표적인 서비스 제공자 프레임워크로는 JDBC(Java Database Connectivity)가 존재한다.</p><ul><li><p>JDBC : java에서 데이터베이스에 접속할 수 있도록 하는 java API</p><p>— <code class="language-plaintext highlighter-rouge">Connection</code> : 서비스 인터페이스</p><p>— <code class="language-plaintext highlighter-rouge">DriverManager.registerDriver</code> : 제공자 등록 API</p><p>— <code class="language-plaintext highlighter-rouge">DriverManager.getConnection</code> : 서비스 등록 API</p><p>— <code class="language-plaintext highlighter-rouge">Driver</code> : 서비스 제공자 인터페이스</p></ul><h3 id="단점"><span class="mr-2">단점</span><a href="#단점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><dl><dt><strong>첫 번째, 상속을 하려면 public이나 protected 생성자가 필요하니 정적 팩토리 메서드만 제공하면 하위 클래스를 만들 수 없다.</strong><dd><p>예를 들어 java.util.Collections 클래스의 경우에는 모든 생성자가 private로 선언되어 있기 때문에 java.util.Collections로 만든 구현체는 상속이 불가능하다. 다만 이러한 점은 상속보다 컴포지션을 사용하도록 유도하고 불변 타입으로 만들기 위해 제약을 지켜야 한다는 점에서 오히려 장점이 될 수 있다.</p><dt><strong>두 번째, 정적 팩토리 메소드는 프로그래머가 찾기 어렵다.</strong><dd><p>public 생성자는 API 설명에서 확인할 수 있기 때문에 프로그래머들이 알기 쉽지만, 정적 팩토리 메소드같은 경우에는 javadoc에서도 따로 정리하지 않기 때문에 API 문서를 잘 작성하고 메소드명을 알려진 규약에 따라 지어 프로그래머가 알기 쉽게 해주어야 한다.</p></dl><ul><li><p><strong>from</strong> : 매개변수를 하나를 받아 해당 타입의 인스턴스를 반환하는 형변환 메서드</p><p>→ <code class="language-plaintext highlighter-rouge">Date d = Date.from(instant);</code></p><li><p><strong>of</strong> : 여러 매개변수를 받아 적합한 타입의 인스턴스를 반환하는 집계 메서드</p><p>→ <code class="language-plaintext highlighter-rouge">Set&lt;Rank&gt; faceCards = EnumSet.of(JACK, QUEEN, KING);</code></p><li><p><strong>valueOf</strong> : from과 of의 더 자세한 버전</p><p>→ <code class="language-plaintext highlighter-rouge">BigInteger prime = BigInteger.valueOf(Integer.MAX_VALUE);</code></p><li><p><strong>instance</strong> / <strong>getInstance</strong> : (매개변수를 받는다면) 매개변수로 명시한 인스턴스를 반환하지만, 같은 인스턴스임을 보장하지는 않는다.</p><p>→ <code class="language-plaintext highlighter-rouge">StackWalker luke = StackWalker.getInstance(options);</code></p><li><p><strong>create</strong> / <strong>newInstance</strong> : instance 혹은 getInstance와 같지만, 매번 새로운 인스턴스를 생성해 반환함을 보장한다.</p><p>→ <code class="language-plaintext highlighter-rouge">Object newArray = Array.newInstance(classObject, arrayLen);</code></p><li><p><strong>get<em>Type</em></strong> : getInstance와 같으나, 생성할 클래스가 아닌 다른 클래스에 팩토리 메서드를 정의할 때 쓴다. “<em>Type</em>”은 팩토리 메소드가 반환할 객체의 타입이다.</p><p>→ <code class="language-plaintext highlighter-rouge">FileStore fs = Files.getFileStore(path);</code></p><li><p><strong>new<em>Type</em></strong> : newInstance와 같으나 생성할 클래스가 아닌 다른 클래스에 팩토리 메서드를 정의할 때 쓴다. “<em>Type</em>”은 팩토리 메소드가 반환할 객체의 타입이다.</p><p>→ <code class="language-plaintext highlighter-rouge">BufferedReader br = Files.newBufferedReader(path);</code></p><li><p><strong><em>type</em></strong> : get<em>Type</em>과 new<em>Type</em>의 간결한 버전</p><p>→ <code class="language-plaintext highlighter-rouge">List&lt;Complaint&gt; litany = Collections.list(legacyLitany);</code></p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/study/'>Study</a>, <a href='/categories/effective-java/'>Effective Java</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a> <a href="/tags/effective-java/" class="post-tag no-text-decoration" >Effective Java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5BEffective+Java%5D+Item+1+-+Dahyun%27s+DEVLOG&url=https%3A%2F%2Fdhyun10.github.io%2F%2Fposts%2FEffective-Java-Item-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5BEffective+Java%5D+Item+1+-+Dahyun%27s+DEVLOG&u=https%3A%2F%2Fdhyun10.github.io%2F%2Fposts%2FEffective-Java-Item-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fdhyun10.github.io%2F%2Fposts%2FEffective-Java-Item-1%2F&text=%5BEffective+Java%5D+Item+1+-+Dahyun%27s+DEVLOG" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Effective-Java-Item-2/">[Effective Java] Item 2</a><li><a href="/posts/Effective-Java-Item-1/">[Effective Java] Item 1</a><li><a href="/posts/OS-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">[OS] 상호 배제 알고리즘</a><li><a href="/posts/OS-%EB%B3%91%ED%96%89-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4(2)/">[OS] 병행 프로세스(2)</a><li><a href="/posts/Spring-REST-API-%EC%9D%91%EB%8B%B5%ED%95%98%EA%B8%B0/">[Spring] RESTful API 제대로 알아보기</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">OS</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/springboot/">SpringBoot</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/java/">JAVA</a> <a class="post-tag" href="/tags/jquery/">JQuery</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Effective-Java-Item-2/"><div class="card-body"> <em class="timeago small" data-ts="1672362000" > 2022-12-30 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Effective Java] Item 2</h3><div class="text-muted small"><p> Effective Java - Item 2 💡 생성자에 매개변수가 많다면 빌더를 고려하라 정적 팩토리와 생성자는 선택적 매개변수가 많을 때에는 대응하기 어렵다는 동일한 제약이 존재한다. 이런 문제의 해결책으로 세 가지 패턴을 들 수 있는데, 바로 점층적 생성자 패턴, 자바빈즈 패턴 그리고 빌더 패턴이다. ❓ 점층적 생성자 패턴 (Telesc...</p></div></div></a></div><div class="card"> <a href="/posts/Effective-Java-Item-3/"><div class="card-body"> <em class="timeago small" data-ts="1672794000" > 2023-01-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Effective Java] Item 3</h3><div class="text-muted small"><p> Effective Java - Item 3 💡 private 생성자나 열거 타입으로 싱글턴임을 보증하라 ❓ 싱글턴(singleton) 객체의 유일성을 보장하기 위해서 인스턴스를 오직 하나만 생성할 수 있는 패턴을 의미한다. 일반적으로 싱글턴 객체에 대한 참조를 public static 필드나 public static 메서드로 노출하기 때문...</p></div></div></a></div><div class="card"> <a href="/posts/Effective-Java-Item-4/"><div class="card-body"> <em class="timeago small" data-ts="1672966800" > 2023-01-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Effective Java] Item 4</h3><div class="text-muted small"><p> Effective Java - Item 4 💡 인스턴스화를 막으려거든 private 생성자를 사용하라 ❓인스턴스화란 메소드와 변수를 모아놓은 것에 불과한 클래스를 사용할 수 있도록 해당 클래스 타입의 객체명을 선언하고 값을 넣어 해당 클래스의 변수나 메소드를 사용 가능한 상태로 만드는 것 기본 타입 값이나 배열 관련 메서드를 모아...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Java-Comparable-%EA%B3%BC-Comparator/" class="btn btn-outline-primary" prompt="Older"><p>[Java] Comparable 과 Comparator</p></a> <a href="/posts/Effective-Java-Item-2/" class="btn btn-outline-primary" prompt="Newer"><p>[Effective Java] Item 2</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="">Kim dahyun</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/effective-java/">Effective Java</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">OS</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/springboot/">SpringBoot</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/java/">JAVA</a> <a class="post-tag" href="/tags/jquery/">JQuery</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
